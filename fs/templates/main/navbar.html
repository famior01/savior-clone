{% url 'posts:main-post-view' as path_to_posts%}
{% url 'profiles:myprofile' as path_to_myprofile %}

{% url 'profiles:all-profiles' as path_to_all_profiles %}
{% url 'profiles:my-invites' as path_to_my_invites %}
{% url 'profiles:sent-invites' as user_friend_request %}
{% url 'zakat_posts:main-post-view' as zakat_posts_home %}
{% url 'zakat_posts:satisfied' as satisfied %}


{% load static %}
{% load notifications_tags %}



<div class="ui inverted menu nav ">
    <div class="ui container fluid ">
    {% if request.user.is_authenticated %}
        <a href="{{zakat_posts_home}}" class="{% if request.path == path_to_posts %}active{% endif %} item">
            <h1>Family Savior</h1>
        </a>
    {% else %}
        <!--for sign up-->
        <a href="#" class="item"><h1>Family Savior</h1></a>
    {% endif %}
    &nbsp;&nbsp;

    <!--I watch icon-->
    {% if request.user.is_authenticated %}
        <a href="{{path_to_posts}}" class="{% if request.path == path_to_posts %}active{% endif %} item">
            <i class="youtube icon"></i>IWatch
        </a>
    {% endif %}
    &nbsp;&nbsp;

    <!--Zakat icon-->
    {% if request.user.is_authenticated %}
        <a href="{{zakat_posts_home}}" class="{% if request.path == zakat_posts_home %}active{% endif %} item">
            <i class=" user md icon"></i>
            Zakat
        </a>
    {% endif %}
    &nbsp;&nbsp;

    <!--Satisfied icon-->
    {% if request.user.is_authenticated %}
        <a href="{{satisfied}}" class="{% if request.path == satisfied %}active{% endif %} item">
            <i class="check icon"></i>Satisfied
        </a>
    {% endif %}
    &nbsp;&nbsp;

    <!--Peoples-->
    {% if request.user.is_authenticated %}

        <!--Search icon-->
        <div class="item">
            <form action="" method="GET">
                <div class="ui action left icon input">
                <input class="prompt" type="text" name='q' placeholder="name of a friend...">
                <i class="search icon"></i>
                <button type='submit' class="ui button">Search</button>
                </div>
            </form>
        </div>

        <!--Friends icon-->
        <div class="item right floated">
            <div class="ui floating dropdown icon button teal"> Friends
                <i class="dropdown icon"></i>
                <div class="menu">
                    <a href="{{path_to_all_profiles}}" class="{% if request.path == path_to_all_profiles %}active{% endif %} item">
                        All Profiles
                    </a>
                    <a href="{{user_friend_request}}" class="{% if request.path == user_friend_request %}active{% endif %} item">
                        Send Invites
                    </a>
                    <!--with notification bannar-->
                    <a href="{{path_to_my_invites}}" class="{% if request.path == path_to_my_invites %}active{% endif %} item">
                        Received Invites &nbsp <div class='ui purple horizontal label'>{{invitations_no}}</div>
                    </a>
                </div>
            </div>
        </div>
        

        <!-- Notification icon in semantic ui-->
        {% comment %} {% register_notify_callbacks callbacks='fill_notification_list,fill_notification_badge' %}  {% endcomment %}

        <div class="item ">
            <div class="ui inline dropdown scrolling">
                <i class="bell icon" ></i>
                {% live_notify_badge %}
                <div class="menu">
                    <!--Delete ALL Notificaitons-->
                    <div class="ui segment red raised">
                    <a href="{% url 'DeleteAllNotifications'  %}">
                        <button type='submit' name='DeleteAllNotifications' 
                        class="ui button bwhite-lg ">Delete All</button></a>
                    
                    <!--Read All notifications-->
                    <a href="{% url 'ReadAllNotifications'  %}">
                        <button type='submit' name='ReadAllNotifications' 
                        class="ui button bwhite-lg ">Read All</button></a>
                    <div class="ui divider" style="margin: 5px 0;"></div>

                    {% for qs in user.notifications.unread %}
                    <div class="ui list segment raised red">  
                        <div class="item mb">
                            
                            <div class="ui header"><i class="mail icon"></i>
                                {{ qs.actor }}
                            </div>
                            <div class="description">
                                {{ qs.verb }}   
                                {% if qs.description %}{{ qs.description }}{% endif %}
                                
                            </div>
                            <div class="description">
                                {{ qs.timestamp|timesince }}
                            </div>
                            <div>
                                {% if request.user.is_authenticated %}
                                    <a href="{% url 'notifications_read' qs.pk %}">
                                        <button type='submit' name='mark_as_read' 
                                        class="ui button bwhite-lg ">Read</button></a>
                                    
                                    <a href="{% url 'notifications_delete' qs.pk %}">
                                        <button type='submit' name='delete' 
                                        class="ui button bwhite-lg ">Delete</button>
                                    </a>
                                    {% endif %}
                            </div>
                            <div class="ui divider" style="margin: 5px 0;"></div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                </div>
            </div>
        </div>



        <!--Profile icon-->
        <div class='item'>
            <a href="{{path_to_myprofile}}" class="{% if request.path == path_to_myprofile %}active{% endif %} item">
                <img src="{{profile_picture.url}}" class='ui avatar image'>&nbsp;{{request.user.username}}
            </a>
        </div>

        <!--nice dropdown menu for semantic ui-->
        <div class="item">
        <div class="ui floating dropdown icon button teal">
            <i class="align justify icon"></i>
            <div class="menu">
                <a href="{% url 'account_logout' %}" class="item">
                    <i class="sign out alternate icon"></i>Logout
                </a>
                <!--account change password-->
                <a href="{% url 'account_change_password' %}" class="item">
                    <i class="key icon"></i>Change Password
                </a>
            </div>
        </div>
        </div>

        

        {% else %}
            <!--for sign up-->
            <div class='item'>
                <a href="{% url 'account_login' %}" class="ui item">Login</a>
            </div>
            <div class='item'>
                <a href="{% url 'account_signup' %}" class="ui item">Signup</a>
            </div>
        {% endif %}
        
</div>
</div>
</div>

<!--Notification-->
<script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>