{% url 'posts:main-post-view' as path_to_posts%}
{% url 'profiles:myprofile' as path_to_myprofile %}

{% url 'profiles:all-profiles' as path_to_all_profiles %}
{% url 'profiles:my-invites' as path_to_my_invites %}
{% url 'profiles:sent-invites' as user_friend_request %}
{% url 'zakat_posts:main-post-view' as zakat_posts_home %}
{% url 'zakat_posts:satisfied' as satisfied %}


{% load static %}
{% load notifications_tags %}

<div class="ui inverted menu nav mb">
    {% if request.user.is_authenticated %}
        <a href="{{path_to_posts}}" class="{% if request.path == path_to_posts %}active{% endif %} item">
            <h3>Family Savior</h3>
        </a>
    {% else %}
        <!--for sign up-->
        <a href="#" class="item">
            <h3>Family Savior</h3>
    {% endif %}

    {% if request.user.is_authenticated %}
        <!--Home icon in semantic ui-->
        <a href="{{path_to_posts}}" class="{% if request.path == path_to_posts %}active{% endif %} item">
            <i class="home icon"></i>Home
        </a>
        
        <!--Zakat icon in semantic ui-->
        <a href="{{zakat_posts_home}}" class="{% if request.path == zakat_posts_home %}active{% endif %} item">
            <i class="money bill alternate icon"></i>zakat_posts
        </a>

        <!--Satisfied icon in semantic ui-->
        <a href="{{satisfied}}" class="{% if request.path == satisfied %}active{% endif %} item">
            <i class="ui hire a helper icon"></i>
            satisfied zakat_posts
        </a>

        <!--Friends icon in semantic ui-->
        <div class="menu">
            <div class="item">
                <div class="ui floating dropdown icon button teal"> Friends
                    <i class="dropdown icon"></i>
                    <div class="menu">
                        <a href="{{path_to_all_profiles}}" class="{% if request.path == path_to_all_profiles %}active{% endif %} item">
                            All Profiles
                        </a>
                        <a href="{{user_friend_request}}" class="{% if request.path == user_friend_request %}active{% endif %} item">
                            Send Invites
                        </a>
                        <!--with notification bannar-->
                        <a href="{{path_to_my_invites}}" class="{% if request.path == path_to_my_invites %}active{% endif %} item">
                            Received Invites &nbsp <div class='ui purple horizontal label'>{{invitations_no}}</div>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!--Search icon in semantic ui-->
        <div class="item">
            <form action="" method="GET">
                <div class="ui action left icon input">
                <input class="prompt" type="text" name='q' placeholder="name of a friend...">
                <i class="search icon"></i>
                <button type='submit' class="ui button">Search</button>
                </div>
            </form>
        </div>

        <!-- Notification icon in semantic ui-->
        {% load notifications_tags %}
        <div class="item">
            <div class="ui floating dropdown icon button teal">
                <i class="bell icon"></i>
                <div class="floating ui mini red label">    
                    {% notifications_unread %}</div>
                    {% for qs in  user.notifications.unread %}
                    <div class="menu">
                        <!--icon for make all as read in semantic ui-->
                        <div class="item">
                            <i class="check icon"></i>
                            <a href="{{ qs.mark_all_as_read}}">Mark all as read</a>
                            <div class="item">
                                <i class="mail icon"></i>
                                {{ qs.actor }}
                                {{ qs.description }}
                                <div class="ui divider" style="margin: 5px 0;"></div>
                            </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        


        <!--Profile icon-->

        <a href="{{ path_to_myprofile }}" class="{% if request.path == path_to_myprofile %}active{% endif %} item">
            <img src="{{ profile_picture.url }}" class='ui avatar image'>&nbsp;{{ request.user.username }}
        </a>
        
        <!-- Options for logout, change password, forgot password-->
        <div class="menu">
            <!--Logout icon-->
            <div class="item">
                <i class="sign out alternate icon">Logout</i>
                <a href="{% url 'account_logout' %}" class="ui item"></a>
            </div>
        </div>
    {% else %}
    
        <a href="{% url 'account_login' %}" class="ui item">Login</a>
        <a href="{% url 'account_signup' %}" class="ui item">Signup</a>
    
    {% endif %}
</div>
    
    
<script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
{% register_notify_callbacks callbacks='fill_notification_list,fill_notification_badge' %}
